<!DOCTYPE html>

<html>
<head>
    
    <!--accordion -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="accordion/js/jquery.zaccordion.js"></script>
    <!--accordion end-->
    
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/bootstrap-responsive.css" />
    <link rel="stylesheet" href="css/animate.css" />
    
    
    
    <link rel="stylesheet" href="map/css/leaflet.css" />
    <!--<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />-->
    <link rel="stylesheet" href="map/css/leaflet.awesome-markers.css" />
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="map/css/leaflet.label.css" />
    <script src="map/js/leaflet.js"></script>
    <script src="map/js/leaflet.label.js"></script>
    <script src="map/js/leaflet.awesome-markers.js"></script>
    
    <!--faces-->
    
    <link rel="stylesheet" type="text/css" href="facesSlider/myVersion/css/default.css" />
    <link rel="stylesheet" type="text/css" href="facesSlider/myVersion/css/component.css" />
    <script src="facesSlider/myVersion/js/modernizr.custom.js"></script>
    <!--<script src="facesSlider/myVersion/js/jquery1.10.1.min.js"></script>
		
    slider links -->
    <link rel="stylesheet" href="facesSlider/myVersion/lightbox/themes/default/default.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="facesSlider/myVersion/lightbox/nivocss.css" type="text/css" media="screen" />
    <!--<link rel="stylesheet" href="facesSlider/myVersion/lightbox/nivo-slider.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="facesSlider/myVersion/lightbox/demo/style.css" type="text/css" media="screen" />-->
    <script type="text/javascript" src="facesSlider/myVersion/lightbox/jquery.nivo.slider.js"></script>
    <!--<script type="text/javascript" src="lightbox/jquery.nivo.slideTo.js"></script>-->
    <!--end slider links -->
    

    <title>Day of Peachtree</title>
    
    <script type="text/javascript">
	var gridID;
	var name;
	var from;
	var yearsRun;
	var age;
	var tweet;
	var slideID;
	var imgSrc;
	var lilImg;
	var bigImg;
	var slideSpot;
	var firstPos;
        var num;
	//var buildHTML;
	
	$(document).ready(function() {
		$.ajax({
		  type: "GET",
		  url: "facesSlider/myVersion/data/runners.xml",
		  dataType: "xml",
		  success: parseRunners
		  });
	});
	
	function parseRunners(xml) {
		
	$(xml).find("person").each(function(){
		
		gridID = $(this).attr("id");
		name = $(this).find("name").text();
		from = $(this).find("from").text();
		yearsRun = $(this).find("yrsrun").text();
		age = $(this).find("age").text();
		tweet = $(this).find("tweet").text();
		slideID = gridID + "div";
                jumpID = gridID + "jump";
                num = parseFloat($(this).find("num").text());
                
                /* $(this).find('ClosedBank').each(function(){
			state.push($(this).find('State').text());
			num.push(parseFloat($(this).find('number').text())); */
                
		//caption = '<div class="nivo-caption" ><p><b>From:</b> '+from+'</p><p><b>Age:</b> '+age+'</p><p><b>Years running the Peachtree:</b> '+yearsRun+'</p><p><b>What would you tweet right now?</b></p><p>'+tweet+'</p></div>';
		
		imgSrc = $(this).attr("url");
		lilImg = '<a id="#" class="nivoLink" rel="' + num + '"><img src="' + imgSrc + '" width="130px" height="130px"/><div><h3>' + name + '</h3></div></a>';
		//listItem = '#' + gridID;
		//lilImg = '<img src="' + imgSrc + '" />';
		bigImg = '<img src="' + imgSrc + '" width="260px" height="260px"/>';
		
			
		$('<li><div id="' + gridID + '">' + lilImg + '</div></li>').appendTo('.cbp-rfgrid');
		
		
		
		$('<a href="#"><img src="' + imgSrc + '" data-thumb="' + imgSrc + '" alt="" /><div id="' + slideID + '"></div></a>').appendTo('.nivoSlider');
		
		//$('<div id="'+ slideID +'"><p><b>From:</b> '+from+'</p><p><b>Age:</b> '+age+'</p><p><b>Years running the Peachtree:</b> '+yearsRun+'</p><p><b>What would you tweet right now?</b></p><p>'+tweet+'</p></div>').appendTo('#inside');
		//$('<div id="' + slideID + '"><p><b>From:</b> '+from+'</p><p><b>Age:</b> '+age+'</p><p><b>Years running the Peachtree:</b> '+yearsRun+'</p><p><b>What would you tweet right now?</b></p><p>'+tweet+'</p></div>').appendTo('.nivo-html-caption');
		
                $('#' +slideID).append('<div class="out border shadow"><h4>'+name+'</h4><p><b>From:</b> '+from+'</p><p><b>Age:</b> '+age+'</p><p><b>Years running the Peachtree:</b> '+yearsRun+'</p><p><b>What would you tweet right now?</b></p><p>'+tweet+'</p></out>');
                    console.log('append');
                
		/*$(window).load(function() {

                    $('.nivoLink').forEach(function(link){
                        $(link).attr('num');
                        $(link).click(function(e) {
                        e.preventDefault();
                            console.log("how many after default");
                        var targetImage = $(this).attr('rel')-1;
                        var slideNo=$('.nivoSlider').data('nivo:vars').currentSlide;
                        if(targetImage!=slideNo) $('.nivo-control').eq(targetImage).trigger('click');
                        
                       });
                        $( '#slider' ).nivoSlider();
			 $('#slider').hide();
                    });
		});*/
                        
              /*$('.nivoLink').forEach(function(link) {
                var id = $(link).attr(ïidÍ);
                $(link).do_something)with_this_link
});
*/
                    
                    
                
                $(window).load(function() {

                    $('.nivoLink').live('click', function(e) {
                        e.preventDefault();
                            console.log("how many after default");
                        var targetImage = $(this).attr('rel')-1;
                        var slideNo=$('.nivoSlider').data('nivo:vars').currentSlide;
                        if(targetImage!=slideNo) $('.nivo-control').eq(targetImage).trigger('click');
                        
                       });
                        $( '#slider' ).nivoSlider();
			 $('#slider').hide();
		});
		
		//make image grid click to open lightbox
		$('#'+gridID).click(function(event){
			$('#hiddenLayer').show();
			$('#slider').show();
                        console.log("click to open");

			
		});	
		
		//close lightbox
		$('#hiddenLayer').click(function(event){
			$('#slider').hide();
			$('#hiddenLayer').hide();
		});
});
	
	};
	</script>
    
</head>

<body>
<!--<div class="container">-->
    <div id="hiddenLayer" style="z-index:1; position:absolute; top:0px; left:0px; width:100%;height:1500px;display:none;">
</div>
<div class="row-fluid">
    <div class="span8">
        <div class="blue headBox margin-bottom shadow"><span class="name">AJC Peachtree Dashboard</span></div>
    </div>
    <div class="span4">
        <a class="results" href="http://projects.ajc.com/running/peachtree/2012/" target="blank"><div class="headBoxRight margin-bottom shadow">Find your Results (2012)</div></a>
    </div>
</div>

<div class="row-fluid">
    <div class="span8">
        
		<script type="text/javascript">
			$(document).ready(function() {
				$("#bounce").zAccordion({
					tabWidth: "10%",
					width: "100%",
					height: "350px",
					auto: false
				});
			
                        });
                        
                        
		</script>
                
                <div class="shadow margin-bottom">
                <ul id="bounce">
				 
                                <li>
                                    <div id="map"></div>
                                    <script src="map/js/myMap.js"></script>
                                    
                                </li>
				<li class="red"><a class="retract" href="#">
                                    <div class="rotate accText">Where to watch</div></a>
                                    <div class="white">
                                        <span class="left sliderText">
                                            <div class="place"><a href="http:/cookhallatlanta.com">Cook Hall</a></div>
                                            Provided seating
                                            includes wooden chairs, pillow lined benches, and umbrella-covered tables.
                                            <br />
                                            <b>Plus:</b> Cook Hall's Fourth Fest kicks off at 5 p.m. Tickets $30/adv & $35/door.
                                            
                                            <br /><br />
                                            
                                            <div class="place"><a href="http://www.rthomasdeluxegrill.net">R. Thomas Deluxe Grill</a></div>
                                            R. Thomas houses a 30 table patio capable of seating up to 89 guests at a
                                            time. <br />
                                            <b>Plus:</b> 
                                            R. Thomas is health conscious and provides many healthy eating options.
                                            
                                        </span>
                                        <span class="right sliderText">
                                            <div class="place"><a href="http://www.flyingbiscuit.com">The Flying Biscuit Cafe</a></div>
                                            Outdoor patio seating is limited, but spectators sitting inside can also view the race
                                            through the establishment's large windows.
                                            <br />
                                            <b>Plus:</b> Located near the finish line. Will be selling grab-and-go treats outside.
                                            
                                            <br /><br />
                                            
                                            <div class="place"><a href="http://www.tapat1180.com">TAP</a></div>
                                            TAP will be expanding its outdoor patio with extra tables and chairs for July 4th celebrations. <br />
                                            <b>Plus:</b> 
                                            Patio is dog friendly.
                                        </span>
                                    </div>
                                </li>
                                
			</ul>
                
                
                </div>
                <div class="closer">Close</div>
                
                
                <div class="blue headBox margin-bottom shadow"><span class="name">Faces of the 2012 Peachtree</span></div>
                
                <ul class="cbp-rfgrid">	
			<!--This is where the images get rendered -->
			</ul>
                             
			
			<!--slider info-->
			<div class="slider-wrapper theme-default">
				<div id="slider" class="nivoSlider">
					
				</div>
				
				<div class="nivo-html-caption">
					<!--<div id="block"></div>-->
					</div>
				
			<!--end slider info-->
			
			</div>
                        
                
  
    </div>

    <div class="span4">
        <div class="spacerTop"></div>
        <div class="shadow twitterHead" id="height">
            
            <span class="headText">#ajcprr</span>
        <div class="iframe"><iframe width="100%" height="1083px" scrolling="yes" overflow="hidden" frameborder="no"  src="http://stage.host.coxmediagroup.com/ajc/digitalprojects/twitter-oauth/index.html"></iframe></div>
        </div>
     
    </div>
<!--</div>-->

</div>

 <script>
                $('#map').hover(function() {
                        $('.red').addClass("animatedMed bounce");
                }, function() {
                        $('.red').removeClass("animatedMed bounce");
                });
                
                $('.red').hover(function() {
                        $('.red').addClass("animatedMed bounce");
                }, function() {
                        $('.red').removeClass("animatedMed bounce");
                });
                
                $('.headBoxRight').hover(function() {
                        $('.headBoxRight').addClass("animated pulse");
                }, function() {
                        $('.headBoxRight').removeClass("animated pulse");
                });
                
                $(".closer").click(function(event)
                                 {
                                 $("#bounce").zAccordion("trigger",0);
                                 console.log('trigger');
                                 /*$("#bounce").zAccordion();
                               console.log("start");*/
                          }); 
               
               
            </script>

</body>
</html>