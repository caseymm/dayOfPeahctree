<html>

<head>
<script src="jquery-1.7.1.js" type="text/javascript"></script>
<link rel="stylesheet" href="prrStyle.css" />

<script type="text/javascript">
var gridID;
var name;
var from;
var yearsRun;
var age;
var tweet;
var slideID;
var imgSrc;
var lilImg;
var bigImg;
var slideSpot;
var firstPos;

$(document).ready(function() {
	$.ajax({
	  type: "GET",
	  url: "people.xml",
	  dataType: "xml",
	  success: parsePeeps
	  });
});

function parsePeeps(xml) {

	$(xml).find("person").each(function(e,gridId,name,from,yearsRun,age,tweet,slideID,imgSrc,lilImg,bigImg,firstPos,slideSpot){
		
		gridID = $(this).attr("id");
		name = $(this).find("name").text();
		from = $(this).find("from").text();
		yearsRun = $(this).find("yrsrun").text();
		age = $(this).find("age").text();
		tweet = $(this).find("tweet").text();
		slideID = gridID + "div";
		imgSrc = $(this).attr("url");
		lilImg = '<a href="#"><img src="' + imgSrc + '" width="120px" height="120px"/></a>';
		bigImg = '<img src="' + imgSrc + '" width="260px" height="260px"/>';
		
		var spot = e*500;
		slideSpot = $('#portraitList').position();
		firstPos = $('#img1div').position();
		
		
		//fill table with images
		
		$('#'+gridID).append(lilImg);
		
		//make image grid click to open lightbox
		
		$('#'+gridID).click(function(event){
			$('#boxContainer').show();
			$('#portraitList').css({'left':'0'});
			$('#portraitList').animate({'left':'-='+spot},'100');
			$('#hiddenLayer').show();
		});
		
		//close lightbox
		$('#closeBtn').click(function(event){
			$('#portraitList').css({'left':'0'});
			$('#boxContainer').hide();
			$('#hiddenLayer').hide();
		});
		$('#hiddenLayer').click(function(event){
			$('#portraitList').css({'left':'0'});
			$('#boxContainer').hide();
			$('#hiddenLayer').hide();
		});
		
		//fill lightbox with info
		
	
		var divStuff = '<div class="names" id="name'+gridID+'"></div><div style="width:500px;height:280px;display:block;"><div class="images" id="img'+gridID+'"></div><div class="information" id="info'+gridID+'"></div></div>';
		
		$('#'+slideID).html(divStuff);
		$('#'+slideID).css({'left': spot});
		$('#name'+gridID).html('<b>'+name+'</b>');
		$('#img'+gridID).html(bigImg);
		$('#info'+gridID).html('<p><b>From:</b> '+from+'</p><p><b>Age:</b> '+age+'</p><p><b>Years running the Peachtree:</b> '+yearsRun+'</p><p><b>What would you tweet right now?</b></p><p>'+tweet+'</p>');
	
	
	
	});
	
$('#boxContainer').mouseover(function(){
	$('#leftHov').show();
	$('#rightHov').show();
	});
$('#boxContainer').mouseout(function(){
	$('#rightHov').hide(); 
	$('#leftHov').hide();
	});	
	
	
	
//positioning within lightbox		
var portraits = $('#portraitList');
var portPos = portraits.position();

$("#leftHov").bind("click", function() {
    portraits.animate({"left":"+=500"}, {
        speed: "fast",
        step: function(left) {
            if (left >= 0) { // stop at ~70
                portraits.stop();
            }
        }
    });
});
$("#rightHov").bind("click", function() {
    portraits.animate({"left":"-=500"}, {
        speed: "fast",
        step: function(left) {
            if (left <= -12000) { // stop at ~70
                portraits.stop();
            }
        }
    });
}); 


//arrows
/*
$('#leftHov').click(function(){
	portraits.animate({'left': '+=500'},'fast');
});
	
$('#rightHov').click(function(){
	portraits.animate({'left': '-=500'},'fast');
});
*/



};

</script>


</head> 

<body style="margin:0px; font-family:'Georgia','Serif';">

<style type="text/css">
	p.byline, p.organization {
		font-size:11px;
		font-family:'Arial',sanserif;
	}
	a:hover {
		text-decoration:none;
	}
</style>

<!-- Table with portraits -->

<style type="text/css">
	td {
		width:120;
		height:120;
		padding:0;
		margin:0;
	}
	img {
		border:none;
		padding:0;
		margin:0;
	}
	a img {
		border:none;
		padding:0;
		margin:0;
	}
</style>

<div id="tableholder" style="width:600px; z-index:0; height:600px;border:none;">

<table border="0">
	
	<tr>
		<td>
			<div id="img1">
			</div>
		</td>
		<td>
			<div id="img2">
			</div>
		</td>
		<td>
			<div id="img3">
			</div>
		</td>
		<td>
			<div id="img4">
			</div>
		</td>
		<td>
			<div id="img5">
			</div>
		</td>
	</tr>
	<tr>
		<td>
			<div id="img6">
			</div>
		</td>
		<td>
			<div id="img7">
			</div>
		</td>
		<td>
			<div id="img8">
			</div>
		</td>
		<td>
			<div id="img9">
			</div>
		</td>
		<td>
			<div id="img10">
			</div>
		</td>
	</tr>
	<tr>
		<td>
			<div id="img11">
			</div>
		</td>
		<td>
			<div id="img12">
			</div>
		</td>
		<td>
			<div id="img13">
			</div>
		</td>
		<td>
			<div id="img14">
			</div>
		</td>
		<td>
			<div id="img15">
			</div>
		</td>
	</tr>
	<tr>
		<td>
			<div id="img16">
			</div>
		</td>
		<td>
			<div id="img17">
			</div>
		</td>
		<td>
			<div id="img18">
			</div>
		</td>
		<td>
			<div id="img19">
			</div>
		</td>
		<td>
			<div id="img20">
			</div>
		</td>
	</tr>
	<tr>
		<td>
			<div id="img21">
			</div>
		</td>
		<td>
			<div id="img22">
			</div>
		</td>
		<td>
			<div id="img23">
			</div>
		</td>
		<td>
			<div id="img24">
			</div>
		</td>
		<td>
			<div id="img25">
			</div>
		</td>
	</tr>

</table>
</div>
<div id="hiddenLayer" style="z-index:1; position:absolute; top:0px; left:0px; width:100%;height:100%;display:none;">
</div>
<!--end table-->



<style type="text/css">
.slideDiv {
	width:500px;
	height:350px;
	display:inline;
	border:none;
	position:absolute;
	list-style-type:none;
	padding:0;
	margin:0;
}

.names {
	font-size:24px;
	width:500px;
	height:30px;
	padding-left:30px;
	padding-top:10px;
}

.images {
	float:left;
	display:inline;
	padding:5px;
	padding-left:30px;
}
.information {
	float:left;
	display:inline;
	height:300px;
	width:200px;
}

.
</style>

<!--begin overlay div-->

<div id="boxContainer">
	<div id="leftHov" style="position:absolute; top:0px; z-index:100;left:0px;display:none;"><a href="#"><img src="img/left.png"/></a></div>
	<div id="rightHov" style="position:absolute; top:0px; z-index:100;right:0px;display:none;"><a href="#"><img src="img/right.png"/></a></div>
	
	<ul id="portraitList" style="width:12500px;height:350px;position:absolute;top:0;left:0;margin:0;padding:0;">
		<li id="img1div" class="slideDiv">
		</li>
		
		<li id="img1div" class="slideDiv">
		</li>
		
		<li id="img2div" class="slideDiv">
		</li>
		
		<li id="img3div" class="slideDiv">
		</li>
		
		<li id="img4div" class="slideDiv">
		</li>
		
		<li id="img5div" class="slideDiv">
		</li>
		
		<li id="img6div" class="slideDiv">
		</li>
		
		<li id="img7div" class="slideDiv">
		</li>
		
		<li id="img8div" class="slideDiv">
		</li>
		
		<li id="img9div" class="slideDiv">
		</li>
		
		<li id="img10div" class="slideDiv">
		</li>
		
		<li id="img11div" class="slideDiv">
		</li>
		
		<li id="img12div" class="slideDiv">
		</li>
		
		<li id="img13div" class="slideDiv">
		</li>
		
		<li id="img14div" class="slideDiv">
		</li>
		
		<li id="img15div" class="slideDiv">
		</li>
		
		<li id="img16div" class="slideDiv">
		</li>
		
		<li id="img17div" class="slideDiv">
		</li>
		
		<li id="img18div" class="slideDiv">
		</li>
		
		<li id="img19div" class="slideDiv">
		</li>
		
		<li id="img20div" class="slideDiv">
		</li>
		
		<li id="img21div" class="slideDiv">
		</li>
		
		<li id="img22div" class="slideDiv">
		</li>
		
		<li id="img23div" class="slideDiv">
		</li>
		
		<li id="img24div" class="slideDiv">
		</li>
		
		<li id="img25div" class="slideDiv">
		</li>
		
		
	</ul>
	
	<div id="closeBtn" style="z-index:500; position:absolute; right:0px; top:320px;width:30px;height:40px;">
		<a href="#" style="text-decoration:none; color:#000; font-family:'Arial',sanserif;">X</a>
	</div>	

</div>



</body>

</html>